<!DOCTYPE html><html lang="fr" class="no-js"><head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Notes techniques du Loup">
      
      
        <meta name="author" content="Gérard Leloup">
      
      
        <link rel="canonical" href="https://loup79.github.io/notes-du-loup/blog/contr%C3%B4le-%C3%A0-distance---vboxdeb12/">
      
      
        <link rel="prev" href="../xrdp--astuces/">
      
      
        <link rel="next" href="../dns-statique---vboxdeb12/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>Contrôle à distance - VBox/Deb12 - Documents du Loup</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.618322db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CConsolas:400,400i,700,700i&amp;display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Consolas"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  <link href="../../assets/stylesheets/glightbox.min.css" rel="stylesheet"><script src="../../assets/javascripts/glightbox.min.js"></script><style id="glightbox-style">
            html.glightbox-open { overflow: initial; height: 100%; }
            .gslide-title { margin-top: 0px; user-select: text; }
            .gslide-desc { color: #666; user-select: text; }
            .gslide-image img { background: white; }
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color); }
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color); }
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color); }
        </style></head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#memento-61-rdp-vnc-ssh" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../.." title="Documents du Loup" class="md-header__button md-logo" aria-label="Documents du Loup" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"></path></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documents du Loup
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Contrôle à distance - VBox/Deb12
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"></path></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"></path></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/loup79/notes-du-loup" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
  </div>
  <div class="md-source__repository">
    Dépot du Loup
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Onglets" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
  Accueil

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
  
  Réseau virtuel

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../informatique/" class="md-tabs__link">
          
  
  
  Divers informatique

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../mkdocs/" class="md-tabs__link">
          
  
  
  Notes MkDocs

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
                
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" hidden>
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Documents du Loup" class="md-nav__button md-logo" aria-label="Documents du Loup" data-md-component="logo">
      
  <img src="../../logo.png" alt="logo">

    </a>
    Documents du Loup
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/loup79/notes-du-loup" title="Aller au dépôt" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"></path></svg>
  </div>
  <div class="md-source__repository">
    Dépot du Loup
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1">
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Accueil
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Accueil
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Administrez votre réseau virtuel !
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../page-prerequis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prérequis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../page-elements-reseau-virtuel/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Eléments du réseau virtuel
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../page-construction-reseau-virtuel-debian/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Construction du réseau
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../page-liste-des-mementos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Liste des mémentos
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Réseau virtuel
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Réseau virtuel
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      <a href="../" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Index de tous les articles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2">
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Filtrage par catégorie
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Filtrage par catégorie
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../01-hyperviseur-virtualbox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    01 Hyperviseur Virtualbox
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../02-serveur-lan-srvlan/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    02 Serveur LAN "srvlan"
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../03-serveur-wan-srvsec/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    03 Serveur WAN "srvsec"
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../04-serveur-dmz-srvdmz/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    04 Serveur DMZ "srvdmz"
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../05-clients-lan-vm1-vm2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    05 Clients LAN "vm1 vm2"
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../06-ovs--conteneurs-lxc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    06 OvS + Conteneurs LXC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../07-acc%C3%A8s-rdp--vnc--ssh/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    07 Accès RDP + VNC + SSH
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../08-dns--dhcp--ddns/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    08 DNS + DHCP + DDNS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../09-lamp--https--cms/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    09 LAMP + HTTPS + CMS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../10-sftp-acc%C3%A8s-cms---ftps/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10 SFTP accès CMS - FTPS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../11-dns-split-et-proxy-inverse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    11 DNS split et Proxy inverse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../12-serveur-de-courrier/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    12 Serveur de courrier
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../13-cockpit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    13 Cockpit
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3">
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Divers informatique
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Divers informatique
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../informatique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Les derniers articles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2">
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Catégorie du site :
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Catégorie du site :
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../informatique/alpine/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Alpine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../informatique/centreon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Centreon
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../informatique/debian/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Debian
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../informatique/eve-ng/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EVE-NG
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../informatique/intelligence-artificielle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Intelligence artificielle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../informatique/nextcloud/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nextcloud
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../informatique/proxmox/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Proxmox
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../informatique/synology/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Synology
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    
  
  
    <li class="md-nav__item">
      <a href="../../informatique/windows/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Windows
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4">
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Notes MkDocs
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Notes MkDocs
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Outil de documentation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/bases-mkdocs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MkDocs - Bases
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/debian-mkdocs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MkDocs - Site Web sur Debian
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/vscodeserver-mkdocs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MkDocs - VS Code Server
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/github-mkdocs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MkDocs - Site Web sur GitHub
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
                
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#memento-61-rdp-vnc-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      
        Mémento 6.1 - RDP, VNC, SSH
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Mémento 6.1 - RDP, VNC, SSH">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rdp-via-virtualbox" class="md-nav__link">
    <span class="md-ellipsis">
      
        RDP via VirtualBox
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RDP via VirtualBox">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-acces-rdp-sur-srvlan" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Accès RDP sur srvlan
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#windows-routes" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Test de connexion
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-remarques" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Remarques
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rdp-via-ipfire" class="md-nav__link">
    <span class="md-ellipsis">
      
        RDP via IPFire
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="RDP via IPFire">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-serveur-rdp-sur-srvlan" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Serveur RDP sur srvlan
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-regle-de-pare-feu-rdp" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Règle de pare-feu RDP
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-test-de-connexion-rdp" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Test de connexion RDP
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vnc-via-ipfire" class="md-nav__link">
    <span class="md-ellipsis">
      
        VNC via IPFire
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VNC via IPFire">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#serveur-vnc" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Serveur VNC sur srvlan
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-lancement-auto-du-serveur" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Lancement auto du serveur
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-regle-de-pare-feu-vnc" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Règle de pare-feu VNC
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-test-de-connexion-vnc" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Test de connexion VNC
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-sur-srvsec-ipfire" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH sur srvsec (IPFire)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH sur srvsec (IPFire)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-activation-du-serveur-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Activation du serveur SSH
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-regle-de-pare-feu-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Règle de pare-feu SSH
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-test-de-connexion-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Test de connexion SSH
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-ovs" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH sur ovs (OpenvSwitch)
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH sur ovs (OpenvSwitch)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-serveur-ssh-sur-ovs" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Serveur SSH sur ovs
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-test-de-connexion-sur-ovs" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Test de connexion sur ovs
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#ssh-sur-les-conteneurs-lxc" class="md-nav__link">
    <span class="md-ellipsis">
      
        SSH sur les conteneurs LXC
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SSH sur les conteneurs LXC">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-conteneur-ctn1" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Conteneur ctn1
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-conteneurs-ctn2-et-ctn3" class="md-nav__link">
    <span class="md-ellipsis">
      
        - Conteneurs ctn2 et ctn3
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#vnc-via-un-tunnel-ssh" class="md-nav__link">
    <span class="md-ellipsis">
      
        VNC via un tunnel SSH
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="VNC via un tunnel SSH">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#-vncssh-depuis-windows" class="md-nav__link">
    <span class="md-ellipsis">
      
        - VNC/SSH depuis Windows
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#-vncssh-depuis-linux" class="md-nav__link">
    <span class="md-ellipsis">
      
        - VNC/SSH depuis Linux
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bilan" class="md-nav__link">
    <span class="md-ellipsis">
      
        Bilan
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
  <div class="md-content md-content--post" data-md-component="content">
    <div class="md-sidebar md-sidebar--post" data-md-component="sidebar" data-md-type="navigation">
      <div class="md-sidebar__scrollwrap">
        <div class="md-sidebar__inner md-post">
          <nav class="md-nav md-nav--primary">
            <div class="md-post__back">
              <div class="md-nav__title md-nav__container">
                <a href="../" class="md-nav__link">
                  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
                  <span class="md-ellipsis">
                    Retourner à l'index
                  </span>
                </a>
              </div>
            </div>
            
              <div class="md-post__authors md-typeset">
                
                  <div class="md-profile md-post__profile">
                    <span class="md-author md-author--long">
                      <img src="https://loup79.github.io/notes-du-loup/blog/logo_bis.png" alt="Loup79">
                    </span>
                    <span class="md-profile__description">
                      <strong>
                        
                          Loup79
                        
                      </strong>
                      <br>
                      Réseau virtuel
                    </span>
                  </div>
                
              </div>
            
            <ul class="md-post__meta md-nav__list">
              <li class="md-nav__item md-nav__item--section">
                <div class="md-post__title">
                  <span class="md-ellipsis">
                    Metadonnées
                  </span>
                </div>
                <nav class="md-nav">
                  <ul class="md-nav__list">
                    <li class="md-nav__item">
                      <div class="md-nav__link">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5z"></path></svg>
                        <time datetime="2023-12-10 00:00:00+00:00" class="md-ellipsis">10/12/2023</time>
                      </div>
                    </li>
                    
                    
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9 3v15h3V3zm3 2 4 13 3-1-4-13zM5 5v13h3V5zM3 19v2h18v-2z"></path></svg>
                          <span class="md-ellipsis">
                            dans
                            
                              <a href="../07-acc%C3%A8s-rdp--vnc--ssh/">07 Accès RDP + VNC + SSH</a></span>
                        </div>
                      </li>
                    
                    
                      
                      <li class="md-nav__item">
                        <div class="md-nav__link">
                          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 20a8 8 0 0 0 8-8 8 8 0 0 0-8-8 8 8 0 0 0-8 8 8 8 0 0 0 8 8m0-18a10 10 0 0 1 10 10 10 10 0 0 1-10 10C6.47 22 2 17.5 2 12A10 10 0 0 1 12 2m.5 5v5.25l4.5 2.67-.75 1.23L11 13V7z"></path></svg>
                          <span class="md-ellipsis">
                            
                              12 min de lecture
                            
                          </span>
                        </div>
                      </li>
                    
                  </ul>
                </nav>
              </li>
            </ul>
            
          </nav>
          
        </div>
      </div>
    </div>
    <article class="md-content__inner md-typeset">
      
        
  



  
  


  <h1>Contrôle à distance - VBox/Deb12</h1>

<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distants-deb12.webp" data-title="Image Pixabay - La commande réseau de TheDigitalArtist" data-desc-position="bottom"><img alt="Image Pixabay - La commande réseau de TheDigitalArtist" src="../images/2024/01/acces-distants-deb12.webp" width="430"></a></p>
</figure>
<h2 id="memento-61-rdp-vnc-ssh">Mémento 6.1 - RDP, VNC, SSH</h2>
<p>Il peut être utile de pouvoir contrôler à distance les VM et les conteneurs LXC du réseau, notamment depuis un PC situé sur le même LAN que le PC hôte de VirtualBox. Des protocoles tels RDP, VNC ou SSH permettent cela.</p>
<p>Etant sur le même LAN, les connexions distantes seront validées simplement par login et MDP.</p>
<h3 id="rdp-via-virtualbox">RDP via VirtualBox</h3>
<p>Par défaut, le serveur Remote Desktop Protocol fourni par VirtualBox utilise le port TCP 3389.</p>
<h4 id="-acces-rdp-sur-srvlan"><em>- Accès RDP sur srvlan</em></h4>
<p>Panneau gauche de VirtualBox, sélectionnez la VM :<br>
- - Menu de VirtualBox &gt; Machine &gt; Configuration<br>
-&gt; Affichage &gt; Bureau à distance<br>
-&gt; Cochez Activer le serveur<br>
-&gt; Port serveur &gt; Affectez un numéro de port, Ex : 7002<br>
-&gt; OK</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/vbox-bureau-distance-deb12.webp" data-title="Capture - VirtualBox : Réglages du bureau à distance" data-desc-position="bottom"><img alt="Capture - VirtualBox : Réglages du bureau à distance" src="../images/2024/01/vbox-bureau-distance-deb12.webp" width="430"></a>
  </p>
<figcaption>VirtualBox : Réglages du bureau à distance</figcaption>
</figure>
<!-- more -->

<h4 id="windows-routes"><em>- Test de connexion</em></h4>
<p>- - Depuis un PC distant sous Windows<br>
Créez, sur celui-ci, les 3 routes statiques permanentes qui permettront de joindre les VM :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a>route<span class="w"> </span>add<span class="w"> </span>-p<span class="w"> </span><span class="m">192</span>.168.2.0<span class="w"> </span>mask<span class="w"> </span><span class="m">255</span>.255.255.0<span class="w"> </span><span class="m">192</span>.168.x.w
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>route<span class="w"> </span>add<span class="w"> </span>-p<span class="w"> </span><span class="m">192</span>.168.3.0<span class="w"> </span>mask<span class="w"> </span><span class="m">255</span>.255.255.0<span class="w"> </span><span class="m">192</span>.168.x.w
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>route<span class="w"> </span>add<span class="w"> </span>-p<span class="w"> </span><span class="m">192</span>.168.4.0<span class="w"> </span>mask<span class="w"> </span><span class="m">255</span>.255.255.0<span class="w"> </span><span class="m">192</span>.168.x.w<span class="w"> </span>
</span></code></pre></div>
<p>192.168.x.w est l'IP de la carte réseau RED d'IPFire.<br>
Le paramètre -p rend la route statique permanente.</p>
<p>Utilisez la Cde route print pour afficher la table de routage de Windows.</p>
<p>Menu Windows :<br>
-&gt; Accessoires Windows ou Outils Windows<br>
-&gt; Connexion Bureau à distance</p>
<p>Activez la connexion RDP comme montré ci-dessous :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-rdp-win11.webp" data-title="Capture - Bureau à distance : IP PC hôte VM:port RDP srvlan" data-desc-position="bottom"><img alt="Capture - Bureau à distance : IP PC hôte VM:port RDP srvlan" src="../images/2024/01/acces-distant-rdp-win11.webp"></a>
  </p>
<figcaption>Bureau à distance : IP PC hôte VM:port RDP srvlan</figcaption>
</figure>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-rdp-bis-win11.webp" data-title="Capture - Bureau à distance : Login retourné par srvlan" data-desc-position="bottom"><img alt="Capture - Bureau à distance : Login retourné par srvlan" src="../images/2024/01/acces-distant-rdp-bis-win11.webp" width="430"></a>
  </p>
<figcaption>Bureau à distance : Login retourné par srvlan</figcaption>
</figure>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-rdp-ter-win11.webp" data-title="Capture - Bureau à distance : Session RDP ouverte sur srvlan" data-desc-position="bottom"><img alt="Capture - Bureau à distance : Session RDP ouverte sur srvlan" src="../images/2024/01/acces-distant-rdp-ter-win11.webp" width="430"></a>
  </p>
<figcaption>Bureau à distance : Session RDP ouverte sur srvlan</figcaption>
</figure>
<p>- - Depuis un PC distant sous Linux<br>
Créez les mêmes routes statiques comme ceci :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>sudo<span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.2.0/24<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.x.w<span class="w"> </span>proto<span class="w"> </span>static<span class="w"> </span>metric<span class="w"> </span><span class="m">100</span>
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>sudo<span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.3.0/24<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.x.w<span class="w"> </span>proto<span class="w"> </span>static<span class="w"> </span>metric<span class="w"> </span><span class="m">100</span>
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>sudo<span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.4.0/24<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.x.w<span class="w"> </span>proto<span class="w"> </span>static<span class="w"> </span>metric<span class="w"> </span><span class="m">100</span><span class="w">  </span>
</span></code></pre></div>
<p>Pour rendre celles-ci permanentes, vous devez tenir compte du gestionnaire de réseau actif.</p>
<p>Si NetworkManager est utilisé, générez les routes statiques depuis son interface graphique et relancez le service réseau :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-2-1"><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>NetworkManager
</span></code></pre></div>
<p>Si c'est le fichier réseau /etc/network/interfaces qui est utilisé, ajoutez les lignes suivantes en fin de fichier et relancez le service réseau :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-3-1"><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a>up<span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.2.0/24<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.x.w<span class="w"> </span>dev<span class="w"> </span>enp0s3
</span><span id="__span-3-2"><a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>up<span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.3.0/24<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.x.w<span class="w"> </span>dev<span class="w"> </span>enp0s3
</span><span id="__span-3-3"><a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>up<span class="w"> </span>ip<span class="w"> </span>route<span class="w"> </span>add<span class="w"> </span><span class="m">192</span>.168.4.0/24<span class="w"> </span>via<span class="w"> </span><span class="m">192</span>.168.x.w<span class="w"> </span>dev<span class="w"> </span>enp0s3
</span><span id="__span-3-4"><a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>
</span><span id="__span-3-5"><a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>networking
</span></code></pre></div>
<p>Adaptez en conséquence le nom de l'interface réseau.</p>
<p>Pour finir, vérifiez la prise en compte des routes :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-4-1"><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a>ip<span class="w"> </span>route
</span></code></pre></div>
<p>Puis installez le client réseau Remmina disponible sur bien des distributions et lancez celui-ci.</p>
<p>192.168.x.y = IP du PC hôte des VM <em>(<a href="../images/2018/05/maquette-base-ipfire.png" target="_blank">Voir la maquette</a>)</em>.<br>
7002 est le numéro de port RDP dédié à la VM srvlan.</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/remmina-rdp-deb12.webp" data-title="Capture - Remmina : Fenêtre de connexion RDP" data-desc-position="bottom"><img alt="Capture - Remmina : Fenêtre de connexion RDP" src="../images/2024/01/remmina-rdp-deb12.webp" width="430"></a>
  </p>
<figcaption>Remmina : Fenêtre de connexion RDP</figcaption>
</figure>
<p>Appuyez sur la touche Entrée pour lancer la connexion :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/remmina-rdp-srvlan-deb12.webp" data-title="Capture - Remmina : Session RDP ouverte sur srvlan" data-desc-position="bottom"><img alt="Capture - Remmina : Session RDP ouverte sur srvlan" src="../images/2024/01/remmina-rdp-srvlan-deb12.webp" width="430"></a>
  </p>
<figcaption>Remmina : Session RDP ouverte sur srvlan</figcaption>
</figure>
<h4 id="-remarques"><em>- Remarques</em></h4>
<p>Vous devez, pour vous connecter sur les autres VM du réseau, affecter à chacune un numéro de port RDP différent, Ex : port 6017 pour la VM srvdmz.</p>
<p>Le serveur RDP de VirtualBox autorise des connexions directes sur les VM, pas besoin par exemple de traverser le pare-feu IPFire pour joindre srvlan.</p>
<p>Ceci permet notamment d'éviter un refus de connexion lié à des problèmes de configuration de table de routage ou de règle de pare-feu sur le réseau virtuel. Cela peut aider à dépanner.</p>
<h3 id="rdp-via-ipfire">RDP via IPFire</h3>
<p>Cela ne concerne pas les VM non graphiques telles IPFire, OpenvSwitch et les conteneurs LXC.</p>
<h4 id="-serveur-rdp-sur-srvlan"><em>- Serveur RDP sur srvlan</em></h4>
<p>Installez le serveur RDP de nom xrdp :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-5-1"><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>xrdp
</span><span id="__span-5-2"><a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>adduser<span class="w"> </span>xrdp<span class="w"> </span>ssl-cert
</span></code></pre></div>
<p>Le serveur est lancé de suite et configuré pour démarrer automatiquement au boot de la VM.</p>
<p>Complément pour les curieux : Suivre les <a href="../xrdp--astuces/">astuces</a> facilitant l'exploitation du service xrdp.</p>
<h4 id="-regle-de-pare-feu-rdp"><em>- Règle de pare-feu RDP</em></h4>
<p>L'accès distant ne fonctionnera cette fois que si vous ajoutez une règle de pare-feu dans IPFire autorisant les demandes de connexion sur le port 3389.</p>
<p>Accédez à l'interface graphique d'IPFire depuis le navigateur Web de srvlan :<br>
-&gt; Pare-feu &gt; Règles de pare-feu &gt; Nouvelle règle</p>
<p>- Zone Source<br>
-&gt; Cochez Réseaux standards &gt; Sélectionnez Tout</p>
<p>- Zone Destination<br>
-&gt; Cochez Réseaux standards &gt; Sélectionnez Tout</p>
<p>- Zone Protocole<br>
-&gt; Sélectionnez TCP &gt; Port de destination<br>
-&gt; Remplissez le champ vide avec le n° de port 3389</p>
<p>-&gt; Cochez ACCEPTER</p>
<p>- Zone Paramètres additionnels<br>
-&gt; Remarque<br>
-&gt; Entrez Connexions RDP entrantes autorisées</p>
<p>-&gt; Ajouter &gt; Appliquer les changements</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/ipfire-rdp-deb12.webp" data-title="Capture - IPFire : Règle de pare-feu RDP" data-desc-position="bottom"><img alt="Capture - IPFire : Règle de pare-feu RDP" src="../images/2024/01/ipfire-rdp-deb12.webp" width="430"></a>
  </p>
<figcaption>IPFire : Règle de pare-feu RDP</figcaption>
</figure>
<div class="admonition nota">
<p class="admonition-title">Important</p>
<p>Fermez ensuite votre session utilisateur srvlan, le serveur xrdp refusant par défaut d'afficher le bureau d'un utilisateur ayant une session déjà ouverte.</p>
</div>
<h4 id="-test-de-connexion-rdp"><em>- Test de connexion RDP</em></h4>
<p>- - Depuis un PC distant sous Windows<br>
Menu Windows :<br>
-&gt; Accessoires Windows ou Outils Windows<br>
-&gt; Connexion Bureau à distance</p>
<p>Entrez l'IP de srvlan 192.168.2.2 dans le champ Ordinateur et cliquez sur le bouton Connexion.</p>
<p>Une alerte Impossible de vérifier l'identité ... &gt; Oui</p>
<p>Connexion établie, la fenêtre suivante s'affiche :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/ipfire-xorgrdp-deb12.webp" data-title="Capture - Fenêtre de connexion du serveur xrdp" data-desc-position="bottom"><img alt="Capture - Fenêtre de connexion du serveur xrdp" src="../images/2024/01/ipfire-xorgrdp-deb12.webp"></a>
  </p>
<figcaption>Fenêtre de connexion du serveur xrdp</figcaption>
</figure>
<p>-&gt; Session : Sélectionnez Xorg<br>
-&gt; username : Entrez srvlan<br>
-&gt; password : Entrez le MDP de srvlan &gt; OK</p>
<p>- - Depuis un PC distant sous Linux<br>
Utilisez de nouveau le logiciel Remmina :<br>
-&gt; Entrez l'IP de srvlan soit 192.168.2.2<br>
-&gt; Touche Entrée pour lancer la connexion</p>
<h3 id="vnc-via-ipfire">VNC via IPFire</h3>
<p>Cela ne concerne pas les VM non graphiques telles IPFire, OpenvSwitch et les conteneurs LXC.</p>
<p>Par défaut, un serveur VNC (Virtual Network Computing) écoute sur le port TCP 5900+N° Ecran.</p>
<h4 id="serveur-vnc"><em>- Serveur VNC sur srvlan</em></h4>
<p>Installez le serveur tigervnc-standalone-server :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-6-1"><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>tigervnc-standalone-server
</span><span id="__span-6-2"><a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>dbus-x11
</span></code></pre></div>
<p>Créez son MDP :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-7-1"><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>vncpasswd
</span></code></pre></div>
<p>Retour :</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-8-1"><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a>Password &gt; Votre MDP VNC (Ex : vncMDPsrvlan)
</span><span id="__span-8-2"><a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>Verify &gt; Entrez de nouveau le MDP
</span><span id="__span-8-3"><a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>Would you like to enter a view-only ... (y/n) ? &gt; n
</span><span id="__span-8-4"><a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>A view-only password is not used
</span></code></pre></div>
<p>Créez ensuite son fichier de configuration tigervnc.conf :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-9-1"><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/home/srvlan
</span><span id="__span-9-2"><a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>nano<span class="w"> </span>.vnc/tigervnc.conf
</span></code></pre></div>
<p>et entrez le contenu suivant :</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-10-1"><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="gh"># Configuration du serveur tigervncserver</span>
</span><span id="__span-10-2"><a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a>$localhost="no";          # Connexion distante autorisée
</span><span id="__span-10-3"><a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a>$geometry="1360x768";     # Taille de l'écran
</span><span id="__span-10-4"><a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a>$depth="24";              # Profondeur des couleurs
</span><span id="__span-10-5"><a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>$AlwaysShared = "yes";    # Connexions simultanées OK
</span></code></pre></div>
<p>Créez un fichier xstartup pour le démarrage sous Xfce4 :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-11-1"><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>nano<span class="w"> </span>.vnc/xstartup
</span></code></pre></div>
<p>et entrez le contenu suivant :</p>
<div class="language-sh highlight"><pre><span></span><code><span id="__span-12-1"><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="ch">#!/bin/sh</span>
</span><span id="__span-12-2"><a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="nb">unset</span><span class="w"> </span>SESSION_MANAGER
</span><span id="__span-12-3"><a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="nb">unset</span><span class="w"> </span>DBUS_SESSION_BUS_ADDRESS
</span><span id="__span-12-4"><a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="nb">exec</span><span class="w"> </span>/bin/sh<span class="w"> </span>/etc/xdg/xfce4/xinitrc
</span></code></pre></div>
<p>Déclarez le fichier comme étant exécutable :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-13-1"><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>chmod<span class="w"> </span>+x<span class="w"> </span>.vnc/xstartup
</span></code></pre></div>
<p>Pour terminer, modifiez le fichier vncserver.users :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-14-1"><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/tigervnc/vncserver.users
</span></code></pre></div>
<p>en ajoutant les lignes suivantes à la fin de celui-ci :</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-15-1"><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="gh"># Utilisateur srvlan désigné pour l'écran 1</span>
</span><span id="__span-15-2"><a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>:1=srvlan
</span></code></pre></div>
<h4 id="-lancement-auto-du-serveur">- <em>Lancement auto du serveur</em></h4>
<p>Pour cela, créez le service <code>tigervncserver@.service</code> :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-16-1"><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span><span class="nb">cd</span><span class="w"> </span>/lib/systemd/system
</span><span id="__span-16-2"><a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>cp<span class="w"> </span>tigervncserver@.service<span class="w"> </span><span class="se">\</span>
</span><span id="__span-16-3"><a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>/etc/systemd/system
</span></code></pre></div>
<p>Le caractère  indique d'écrire la Cde sur une seule ligne.</p>
<p>Configurez son démarrage automatique pour l'écran 1 :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-17-1"><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>tigervncserver@:1
</span><span id="__span-17-2"><a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span><span class="nb">enable</span><span class="w"> </span>tigervncserver@:1
</span></code></pre></div>
<p>Pour finir, redémarrez srvlan :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-18-1"><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>reboot
</span></code></pre></div>
<p>et vérifiez le lancement automatique du serveur VNC :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-19-1"><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>vncserver<span class="w"> </span>-list
</span></code></pre></div>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-vnc-liste-deb12.webp" data-title="Capture - Serveur VNC : Port par défaut 5901 en écoute" data-desc-position="bottom"><img alt="Capture - Serveur VNC : Port par défaut 5901 en écoute" src="../images/2024/01/acces-distant-vnc-liste-deb12.webp" width="430"></a>
  </p>
<figcaption>Serveur VNC : Port par défaut 5901 en écoute</figcaption>
</figure>
<p>Pour info, le serveur peut être arrêté comme suit :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-20-1"><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="o">[</span>srvlan@srvlan:~$<span class="o">]</span><span class="w"> </span>vncserver<span class="w"> </span>-kill<span class="w"> </span>:1
</span></code></pre></div>
<h4 id="-regle-de-pare-feu-vnc"><em>- Règle de pare-feu VNC</em></h4>
<p>Accédez à l'interface graphique d'IPFire depuis le navigateur Web de srvlan :<br>
-&gt; Pare-feu &gt; Règles de pare-feu &gt; Nouvelle règle</p>
<p>- Zone Source<br>
-&gt; Cochez Réseaux standards &gt; Sélectionnez Tout</p>
<p>- Zone Destination<br>
-&gt; Cochez Réseaux standards &gt; Sélectionnez Tout</p>
<p>- Zone Protocole<br>
-&gt; Sélectionnez TCP &gt; Port de destination<br>
-&gt; Remplissez le champ vide avec le n° de port 5901</p>
<p>-&gt; Cochez ACCEPTER</p>
<p>- Zone Paramètres additionnels<br>
-&gt; Remarque<br>
-&gt; Entrez Connexions VNC entrantes autorisées</p>
<p>-&gt; Ajouter &gt; Appliquer les changements</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/ipfire-vnc-deb12.webp" data-title="Capture - IPFire : Règle de pare-feu VNC" data-desc-position="bottom"><img alt="Capture - IPFire : Règle de pare-feu VNC" src="../images/2024/01/ipfire-vnc-deb12.webp" width="430"></a>
  </p>
<figcaption>IPFire : Règle de pare-feu VNC</figcaption>
</figure>
<h4 id="-test-de-connexion-vnc"><em>- Test de connexion VNC</em></h4>
<p>- - Depuis un PC distant sous Windows<br>
Téléchargez le client <a href="https://www.realvnc.com/fr/connect/download/viewer/" target="_blank">VNC Viewer</a> de RealVNC.</p>
<p>Effectuez son installation et démarrez le logiciel.</p>
<p>Configurez ensuite une connexion pour joindre srvlan :<br>
- Menu Fichier<br>
-&gt; Nouvelle connexion...</p>
<p>- Une fenêtre Propriétés s'ouvre.<br>
-&gt; Onglet Général<br>
Paramétrez VNC Viewer comme ci-dessous :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-vnc-srvlan-1-deb12.webp" data-title="Capture - VNC Viewer : Paramètres onglet Général" data-desc-position="bottom"><img alt="Capture - VNC Viewer : Paramètres onglet Général" src="../images/2024/01/acces-distant-vnc-srvlan-1-deb12.webp" width="430"></a>
  </p>
<figcaption>VNC Viewer : Paramètres onglet Général</figcaption>
</figure>
<p>-&gt; Onglet Options<br>
Paramétrez VNC Viewer comme ci-dessous :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-vnc-srvlan-2-deb12.webp" data-title="Capture - VNC Viewer : Paramètres onglet Options" data-desc-position="bottom"><img alt="Capture - VNC Viewer : Paramètres onglet Options" src="../images/2024/01/acces-distant-vnc-srvlan-2-deb12.webp" width="430"></a>
  </p>
<figcaption>VNC Viewer : Paramètres onglet Options</figcaption>
</figure>
<p>Résultat, VNC Viewer montre la nouvelle connexion :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-vnc-srvlan-3-deb12.webp" data-title="Capture - VNC Viewer : Connexion VNC créée pour srvlan" data-desc-position="bottom"><img alt="Capture - VNC Viewer : Connexion VNC créée pour srvlan" src="../images/2024/01/acces-distant-vnc-srvlan-3-deb12.webp" width="430"></a>
  </p>
<figcaption>VNC Viewer : Connexion VNC créée pour srvlan</figcaption>
</figure>
<p>Test de connexion :<br>
-&gt; Double-cliquez sur l'icône srvlan</p>
<p>Une fenêtre Chiffrement s'ouvre :<br>
-&gt; Cochez Ne plus afficher cet avertissement<br>
-&gt; Continuer</p>
<p>Une fenêtre Authentification s'ouvre :<br>
-&gt; Entrez votre MDP VNC pour srvlan &gt; OK</p>
<p>Connexion établie, la fenêtre suivante s'affiche :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-vnc-srvlan-4-deb12.webp" data-title="Capture - VNC Viewer : Session VNC ouverte sur srvlan" data-desc-position="bottom"><img alt="Capture - VNC Viewer : Session VNC ouverte sur srvlan" src="../images/2024/01/acces-distant-vnc-srvlan-4-deb12.webp" width="430"></a>
  </p>
<figcaption>VNC Viewer : Session VNC ouverte sur srvlan</figcaption>
</figure>
<p>- - Depuis un PC distant sous Linux<br>
a) Téléchargez le client <a href="https://www.realvnc.com/fr/connect/download/viewer/" target="_blank">VNC Viewer</a> de votre version Linux.<br>
Effectuez son installation et démarrez le logiciel.<br>
Procédez ensuite comme sous Windows.</p>
<p>b) Remmina peut également exploiter le protocole VNC.<br>
Cliquez sur l'icône + (profil) située en haut à gauche.</p>
<p>Une fenêtre Profil de connexion à distance s'ouvre.<br>
Configurez la connexion VNC comme ci-dessous :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-vnc-remmina-deb12.webp" data-title="Capture - Remmina : Fenêtre de configuration/connexion VNC" data-desc-position="bottom"><img alt="Capture - Remmina : Fenêtre de configuration/connexion VNC" src="../images/2024/01/acces-distant-vnc-remmina-deb12.webp" width="430"></a>
  </p>
<figcaption>Remmina : Fenêtre de configuration/connexion VNC</figcaption>
</figure>
<p>Le MDP de l'utilisateur = Votre MDP VNC <em>( <a href="#serveur-vnc">Voir ci-dessus</a> )</em></p>
<h3 id="ssh-sur-srvsec-ipfire">SSH sur srvsec (IPFire)</h3>
<p>Par défaut, un serveur SSH (Secure SHell) écoute sur le port TCP 22.</p>
<h4 id="-activation-du-serveur-ssh"><em>- Activation du serveur SSH</em></h4>
<p>Accédez à l'interface graphique d'IPFire depuis le navigateur Web de srvlan :<br>
-&gt; Système &gt; Accès SSH</p>
<p>Une fenêtre Accès distant s'ouvre :<br>
-&gt; Cochez Accès SSH<br>
-&gt; Décochez Définir le port SSH à 22<br>
-&gt; Bouton Sauvegarder</p>
<h4 id="-regle-de-pare-feu-ssh"><em>- Règle de pare-feu SSH</em></h4>
<p>Accédez à l'interface graphique d'IPFire depuis le navigateur Web de srvlan :<br>
-&gt; Pare-feu &gt; Règles de pare-feu &gt; Nouvelle règle</p>
<p>- Zone Source<br>
-&gt; Cochez Réseaux standards &gt; Sélectionnez Tout</p>
<p>- Zone Destination<br>
-&gt; Cochez Réseaux standards &gt; Sélectionnez Tout</p>
<p>- Zone Protocole<br>
-&gt; Sélectionnez TCP &gt; Port de destination<br>
-&gt; Remplissez le champ vide avec le n° de port <mark>222</mark></p>
<p>-&gt; Cochez ACCEPTER</p>
<p>- Zone Paramètres additionnels<br>
-&gt; Remarque<br>
-&gt; Entrez Connexions SSH entrantes autorisées</p>
<p>-&gt; Ajouter &gt; Appliquer les changements</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/ipfire-ssh-deb12.webp" data-title="Capture - IPFire : Règle de pare-feu SSH" data-desc-position="bottom"><img alt="Capture - IPFire : Règle de pare-feu SSH" src="../images/2024/01/ipfire-ssh-deb12.webp" width="430"></a>
  </p>
<figcaption>IPFire : Règle de pare-feu SSH</figcaption>
</figure>
<h4 id="-test-de-connexion-ssh"><em>- Test de connexion SSH</em></h4>
<p>- - Depuis un PC distant sous Windows<br>
Téléchargez le client SSH <a href="https://www.putty.org/" target="_blank">Putty</a> et installez celui-ci.</p>
<p>Ensuite, démarrez et configurez Putty comme suit :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2022/05/acces-distant-ssh-putty-srvsec.webp" data-title="Capture - Putty : Configuration SSH pour IPFire" data-desc-position="bottom"><img alt="Capture - Putty : Configuration SSH pour IPFire" src="../images/2022/05/acces-distant-ssh-putty-srvsec.webp" width="430"></a>
  </p>
<figcaption>Putty : Configuration SSH pour IPFire</figcaption>
</figure>
<p>La VM srvsec étant de confiance, acceptez l'alerte de sécurité et lancez une seconde connexion.</p>
<p>Résultat :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-ssh-putty-srvsec-2023.webp" data-title="Capture - Putty : Connexion SSH établie sur IPFire" data-desc-position="bottom"><img alt="Capture - Putty : Connexion SSH établie sur IPFire" src="../images/2024/01/acces-distant-ssh-putty-srvsec-2023.webp"></a>
  </p>
<figcaption>Putty : Connexion SSH établie sur IPFire</figcaption>
</figure>
<p>Il n'y aura pas d'alerte de sécurité lors des connexions suivantes, utilisez la Cde exit pour quitter.</p>
<p>- - Depuis un PC distant sous Linux<br>
a) Installez le paquet putty fourni par votre distribution.<br>
Procédez ensuite comme sous Windows.</p>
<p>b) Remmina peut également exploiter le protocole SSH.<br>
Cliquez sur l'icône + (profil) située en haut à gauche.</p>
<p>Une fenêtre Profil de connexion à distance s'ouvre.<br>
Configurez la connexion SSH comme ci-dessous :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-ssh-remmina-srvsec-deb12.webp" data-title="Capture - Remmina : Configuration SSH pour IPFire" data-desc-position="bottom"><img alt="Capture - Remmina : Configuration SSH pour IPFire" src="../images/2024/01/acces-distant-ssh-remmina-srvsec-deb12.webp" width="430"></a>
  </p>
<figcaption>Remmina : Configuration SSH pour IPFire</figcaption>
</figure>
<h3 id="ssh-ovs">SSH sur ovs (OpenvSwitch)</h3>
<h4 id="-serveur-ssh-sur-ovs"><em>- Serveur SSH sur ovs</em></h4>
<p>Installez le serveur OpenSSH :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-21-1"><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="o">[</span>switch@ovs:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>openssh-server
</span></code></pre></div>
<p>et contrôlez l'activation du démon SSH :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-22-1"><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="o">[</span>switch@ovs:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>sshd
</span></code></pre></div>
<p>Le résultat de la Cde doit montrer active (running).</p>
<p>Editez ensuite le fichier de configuration sshd_config :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-23-1"><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="o">[</span>switch@ovs:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>nano<span class="w"> </span>/etc/ssh/sshd_config
</span></code></pre></div>
<p>et remplacez la ligne #Port 22 par Port 222.</p>
<p>Redémarrez le serveur pour traiter la modification :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-24-1"><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="o">[</span>switch@ovs:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>systemctl<span class="w"> </span>restart<span class="w"> </span>sshd
</span></code></pre></div>
<h4 id="-test-de-connexion-sur-ovs"><em>- Test de connexion sur ovs</em></h4>
<p>Effectuez une connexion à l'aide de Putty :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2022/01/acces-distant-ssh-putty-ovs.webp" data-title="Capture - Putty : Configuration SSH pour OpenvSwitch" data-desc-position="bottom"><img alt="Capture - Putty : Configuration SSH pour OpenvSwitch" src="../images/2022/01/acces-distant-ssh-putty-ovs.webp" width="430"></a>
  </p>
<figcaption>Putty : Configuration SSH pour OpenvSwitch</figcaption>
</figure>
<p>Résultat :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-ssh-putty-ovs-2023.webp" data-title="Capture - Putty : Connexion SSH établie sur OpenvSwitch" data-desc-position="bottom"><img alt="Capture - Putty : Connexion SSH établie sur OpenvSwitch" src="../images/2024/01/acces-distant-ssh-putty-ovs-2023.webp" width="430"></a>
  </p>
<figcaption>Putty : Connexion SSH établie sur OpenvSwitch</figcaption>
</figure>
<h3 id="ssh-sur-les-conteneurs-lxc">SSH sur les conteneurs LXC</h3>
<h4 id="-conteneur-ctn1"><em>- Conteneur ctn1</em></h4>
<p>Installez depuis l'hôte ovs un serveur SSH sur ctn1 :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-25-1"><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="o">[</span>switch@ovs:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>podman<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>ctn1<span class="w"> </span>bash
</span><span id="__span-25-2"><a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a>
</span><span id="__span-25-3"><a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="o">[</span>root@..:~#<span class="o">]</span><span class="w"> </span>apt<span class="w"> </span>update<span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span>apt<span class="w"> </span>upgrade
</span><span id="__span-25-4"><a id="__codelineno-25-4" name="__codelineno-25-4" href="#__codelineno-25-4"></a><span class="o">[</span>root@..:~#<span class="o">]</span><span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>openssh-server
</span></code></pre></div>
<p>Editez ensuite son fichier de configuration sshd_config :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-26-1"><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="o">[</span>root@..:~#<span class="o">]</span><span class="w"> </span>apt<span class="w"> </span>install<span class="w"> </span>nano
</span><span id="__span-26-2"><a id="__codelineno-26-2" name="__codelineno-26-2" href="#__codelineno-26-2"></a><span class="o">[</span>root@..:~#<span class="o">]</span><span class="w"> </span>nano<span class="w"> </span>/etc/ssh/sshd_config
</span></code></pre></div>
<p>et modifiez les 2 lignes suivantes comme ci-dessous :<br>
#Port 22 &gt; Port 222<br>
#PermitRootLogin prohib...word &gt; PermitRootLogin <mark>yes</mark></p>
<p>Redémarrez le serveur SSH pour traiter la configuration :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-27-1"><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="o">[</span>root@..:~#<span class="o">]</span><span class="w"> </span>/etc/init.d/ssh<span class="w"> </span>start
</span><span id="__span-27-2"><a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="o">[</span>root@..:~#<span class="o">]</span><span class="w"> </span>/etc/init.d/ssh<span class="w"> </span>status<span class="w">     </span><span class="c1"># normal = sshd is running</span>
</span></code></pre></div>
<p>Attribuez un MDP à l'utilisateur root du conteneur :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-28-1"><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="o">[</span>root@..:~#<span class="o">]</span><span class="w"> </span>passwd
</span></code></pre></div>
<p>Editez le fichier .bashrc de l'utilisateur root :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-29-1"><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="o">[</span>root@..:~#<span class="o">]</span><span class="w"> </span>nano<span class="w"> </span>/root/.bashrc
</span></code></pre></div>
<p>et entrez le contenu suivant en fin de fichier :</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-30-1"><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="gh"># Lancement automatique du serveur ssh</span>
</span><span id="__span-30-2"><a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a>/etc/init.d/ssh start
</span></code></pre></div>
<p>Ensuite, déconnectez-vous du conteneur :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-31-1"><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="o">[</span>root@...:~#<span class="o">]</span><span class="w"> </span><span class="nb">exit</span>
</span><span id="__span-31-2"><a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a>
</span><span id="__span-31-3"><a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="o">[</span>switch@ovs:~$<span class="o">]</span><span class="w"> </span>
</span></code></pre></div>
<p>et listez les images Podman utilisées en mode rootfull :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-32-1"><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="o">[</span>switch@ovs:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>podman<span class="w"> </span>images
</span></code></pre></div>
<p>Retour :</p>
<div class="language-markdown highlight"><pre><span></span><code><span id="__span-33-1"><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a>switch@ovs:~$ sudo podman images
</span><span id="__span-33-2"><a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>REPOSITORY                      TAG         
</span><span id="__span-33-3"><a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>localhost/uptime-kuma           2           ...
</span><span id="__span-33-4"><a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a>localhost/debian                1           ...
</span><span id="__span-33-5"><a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>docker.io/louislam/uptime-kuma  1           ...
</span><span id="__span-33-6"><a id="__codelineno-33-6" name="__codelineno-33-6" href="#__codelineno-33-6"></a>docker.io/library/debian        latest      ...
</span><span id="__span-33-7"><a id="__codelineno-33-7" name="__codelineno-33-7" href="#__codelineno-33-7"></a>switch@ovs:~$
</span></code></pre></div>
<p>Créez une nouvelle image de ctn1 incluant le SSH :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-34-1"><a id="__codelineno-34-1" name="__codelineno-34-1" href="#__codelineno-34-1"></a>sudo<span class="w"> </span>podman<span class="w"> </span>commit<span class="w"> </span>ctn1<span class="w"> </span>debian:2<span class="w">       </span><span class="c1"># Création image tag 2</span>
</span></code></pre></div>
<p>et recréez ctn1 depuis celle-ci :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-35-1"><a id="__codelineno-35-1" name="__codelineno-35-1" href="#__codelineno-35-1"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>stop<span class="w"> </span>container-ctn1<span class="w">         </span><span class="c1"># Suppression de ctn1</span>
</span><span id="__span-35-2"><a id="__codelineno-35-2" name="__codelineno-35-2" href="#__codelineno-35-2"></a>sudo<span class="w"> </span>podman<span class="w"> </span>ps<span class="w">                          </span><span class="c1"># Vérification de la suppression</span>
</span><span id="__span-35-3"><a id="__codelineno-35-3" name="__codelineno-35-3" href="#__codelineno-35-3"></a>
</span><span id="__span-35-4"><a id="__codelineno-35-4" name="__codelineno-35-4" href="#__codelineno-35-4"></a>sudo<span class="w"> </span>podman<span class="w"> </span>run<span class="w"> </span>-dit<span class="w"> </span>--net<span class="w"> </span>ns:/var/run/netns/nsctn1<span class="w"> </span>--name<span class="w"> </span>ctn1<span class="w"> </span>debian:2<span class="w">         </span><span class="c1"># Création ctn1 depuis image tag 2</span>
</span><span id="__span-35-5"><a id="__codelineno-35-5" name="__codelineno-35-5" href="#__codelineno-35-5"></a>
</span><span id="__span-35-6"><a id="__codelineno-35-6" name="__codelineno-35-6" href="#__codelineno-35-6"></a><span class="nb">cd</span><span class="w"> </span>/etc/systemd/system
</span><span id="__span-35-7"><a id="__codelineno-35-7" name="__codelineno-35-7" href="#__codelineno-35-7"></a>
</span><span id="__span-35-8"><a id="__codelineno-35-8" name="__codelineno-35-8" href="#__codelineno-35-8"></a>sudo<span class="w"> </span>podman<span class="w"> </span>generate<span class="w"> </span>systemd<span class="w"> </span>--new<span class="w"> </span>--files<span class="w"> </span>--name<span class="w"> </span>ctn1
</span><span id="__span-35-9"><a id="__codelineno-35-9" name="__codelineno-35-9" href="#__codelineno-35-9"></a>cat<span class="w"> </span>container-ctn1.service<span class="w">                         </span><span class="c1"># Lecture par curiosité</span>
</span><span id="__span-35-10"><a id="__codelineno-35-10" name="__codelineno-35-10" href="#__codelineno-35-10"></a>
</span><span id="__span-35-11"><a id="__codelineno-35-11" name="__codelineno-35-11" href="#__codelineno-35-11"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>daemon-reload
</span><span id="__span-35-12"><a id="__codelineno-35-12" name="__codelineno-35-12" href="#__codelineno-35-12"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>start<span class="w"> </span>container-ctn1
</span><span id="__span-35-13"><a id="__codelineno-35-13" name="__codelineno-35-13" href="#__codelineno-35-13"></a>sudo<span class="w"> </span>systemctl<span class="w"> </span>status<span class="w"> </span>container-ctn1
</span></code></pre></div>
<p>Redémarrez la VM ovs :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-36-1"><a id="__codelineno-36-1" name="__codelineno-36-1" href="#__codelineno-36-1"></a>sudo<span class="w"> </span>reboot
</span></code></pre></div>
<p>et connectez-vous depuis Putty en procédant comme pour la VM ovs mais avec l'IP 192.168.3.6.</p>
<h4 id="-conteneurs-ctn2-et-ctn3"><em>- Conteneurs ctn2 et ctn3</em></h4>
<p>Les 2 conteneurs basés sur Debian supportent l'outil de surveillance réseau Uptime Kuma dont la configuration s'effectue directement depuis son interface Web.</p>
<p>Pour interagir avec Debian, utilisez l'accès SSH de la VM ovs et exploitez les 2 Cdes suivantes :</p>
<div class="language-bash highlight"><pre><span></span><code><span id="__span-37-1"><a id="__codelineno-37-1" name="__codelineno-37-1" href="#__codelineno-37-1"></a><span class="o">[</span>switch@ovs:~$<span class="o">]</span><span class="w"> </span>sudo<span class="w"> </span>podman<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>ctn2<span class="w"> </span>bash
</span><span id="__span-37-2"><a id="__codelineno-37-2" name="__codelineno-37-2" href="#__codelineno-37-2"></a>
</span><span id="__span-37-3"><a id="__codelineno-37-3" name="__codelineno-37-3" href="#__codelineno-37-3"></a><span class="o">[</span>switch@ovs:~$<span class="o">]</span><span class="w"> </span>podman<span class="w"> </span><span class="nb">exec</span><span class="w"> </span>-it<span class="w"> </span>ctn3<span class="w"> </span>bash
</span></code></pre></div>
<h3 id="vnc-via-un-tunnel-ssh">VNC via un tunnel SSH</h3>
<p>De base, une connexion VNC n'est pas sécurisée mais il est possible de faire transiter celle-ci à l'intérieur d'un tunnel SSH pour régler ce problème.</p>
<p>Ceci implique de configurer le serveur SSH d'IPFire afin qu'il accepte le transfert de ports TCP.</p>
<p>Accédez à l'interface graphique d'IPFire depuis le navigateur Web de srvlan :<br>
-&gt; Système &gt; Accès SSH</p>
<p>Une fenêtre Accès distant s'ouvre :<br>
-&gt; Cochez Autoriser le transfert TCP<br>
-&gt; Bouton Sauvegarder</p>
<h4 id="-vncssh-depuis-windows"><em>- VNC/SSH depuis Windows</em></h4>
<p>Configurez un tunnel SSH avec Putty en respectant la chronologie des 2 captures suivantes :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-srvlan-vnc-ssh1-deb12.webp" data-title="Capture - Putty : Configuration tunnel SSH pour VNC" data-desc-position="bottom"><img alt="Capture - Putty : Configuration tunnel SSH pour VNC" src="../images/2024/01/acces-distant-srvlan-vnc-ssh1-deb12.webp" width="430"></a>
  </p>
<figcaption>Putty : Configuration tunnel SSH pour VNC</figcaption>
</figure>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-srvlan-vnc-ssh2-deb12.webp" data-title="Capture - Putty : Configuration tunnel SSH pour VNC" data-desc-position="bottom"><img alt="Capture - Putty : Configuration tunnel SSH pour VNC" src="../images/2024/01/acces-distant-srvlan-vnc-ssh2-deb12.webp" width="430"></a>
  </p>
<figcaption>Putty : Configuration tunnel SSH pour VNC</figcaption>
</figure>
<p>Puis lancez, depuis le client VNC Viewer de RealVNC, une connexion VNC locale (127.0.0.1) :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-srvlan-vnc-ssh3-deb12.webp" data-title="Capture - RealVNC : Demande d'une connexion VNC locale" data-desc-position="bottom"><img alt="Capture - RealVNC : Demande d'une connexion VNC locale" src="../images/2024/01/acces-distant-srvlan-vnc-ssh3-deb12.webp"></a>
  </p>
<figcaption>RealVNC : Demande d'une connexion VNC locale</figcaption>
</figure>
<p>La demande locale d'accès au port TCP 5901 utilisé par le protocole VNC sera automatiquement envoyée à l'intérieur du tunnel SSH vers le serveur SSH d'IPFire qui transfèrera celle-ci vers le serveur VNC de srvlan.</p>
<p>Pensez à fermer, une fois votre communication VNC terminée, la connexion SSH de Putty.</p>
<h4 id="-vncssh-depuis-linux"><em>- VNC/SSH depuis Linux</em></h4>
<p>Le plus simple est d'utiliser de nouveau Remmina.<br>
Cliquez sur l'icône + (profil) située en haut à gauche.</p>
<p>Une fenêtre Profil de connexion à distance s'ouvre.<br>
Configurez la connexion VNC comme ci-dessous :</p>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-srvlan-vnc-ssh1-remmina-deb12.webp" data-title="Capture - Remmina : Configuration VNC avec tunnel SSH" data-desc-position="bottom"><img alt="Capture - Remmina : Configuration VNC avec tunnel SSH" src="../images/2024/01/acces-distant-srvlan-vnc-ssh1-remmina-deb12.webp" width="430"></a>
  </p>
<figcaption>Remmina : Configuration VNC avec tunnel SSH</figcaption>
</figure>
<figure>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2024/01/acces-distant-srvlan-vnc-ssh2-remmina-deb12.webp" data-title="Capture - Remmina : Configuration VNC avec tunnel SSH" data-desc-position="bottom"><img alt="Capture - Remmina : Configuration VNC avec tunnel SSH" src="../images/2024/01/acces-distant-srvlan-vnc-ssh2-remmina-deb12.webp" width="430"></a>
  </p>
<figcaption>Remmina : Configuration VNC avec tunnel SSH</figcaption>
</figure>
<p>La connexion SSH sera cette fois fermée automatiquement en fin de communication VNC.</p>
<h3 id="bilan">Bilan</h3>
<p>Les VM et conteneurs LXC sont joignables à distance.</p>
<p>La sécurité des accès reste néanmoins perfectible :<br>
- En ne travaillant pas avec des n° de port par défaut.<br>
- En réglant plus finement les sources dans IPFire.<br>
- En utilisant les clés publiques et privées de SSH.<br>
- Etc...</p>
<p><a class="glightbox" data-type="image" data-width="100%" data-height="auto" href="../images/2023/07/redacteur_satisfait.jpg" data-title="Image - Rédacteur satisfait" data-desc-position="bottom"><img align="left" alt="Image - Rédacteur satisfait" src="../images/2023/07/redacteur_satisfait.jpg" title="Image Pixabay - Mohamed Hassan"></a></p>
<p>&nbsp;<br>
Terminé pour l'instant !<br>
Le mémento 7.1 vous attend<br>
pour l'installation d'un serveur<br>
DNS statique sur srvlan.</p>
<p><a class="md-button md-button--primary" href="../dns-statique---vboxdeb12/">Mémento 7.1</a></p>







  
  




  



      
    </article>
  </div>

          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"></path></svg>
  Retour en haut de la page
</button>
        
      </main>
      
        <footer class="md-footer">
  
    
      
        
      
      <nav class="md-footer__inner md-grid" aria-label="Pied de page">
        
          
          <a href="../xrdp--astuces/" class="md-footer__link md-footer__link--prev" aria-label="Précédent: XRDP – Astuces">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"></path></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Précédent
              </span>
              <div class="md-ellipsis">
                XRDP – Astuces
              </div>
            </div>
          </a>
        
        
          
          <a href="../dns-statique---vboxdeb12/" class="md-footer__link md-footer__link--next" aria-label="Suivant: DNS statique - VBox/Deb12">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Suivant
              </span>
              <div class="md-ellipsis">
                DNS statique - VBox/Deb12
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"></path></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2024 - Leloup Gérard
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "navigation.top", "navigation.footer", "content.code.copy"], "search": "../../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
    
  
<script id="init-glightbox">const lightbox = GLightbox({"touchNavigation": false, "loop": false, "zoomable": true, "draggable": false, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "none"});
document$.subscribe(()=>{ lightbox.reload(); });
</script></body></html>